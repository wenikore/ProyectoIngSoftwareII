<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/templates/principal.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="content">
        <div style="height: 80%; width: 100%">
            <h:form id="formAgregarUsuarioId" class="formularios">
                <p:defaultCommand target="saveButtomId"></p:defaultCommand>
                <h1>Registrar Vendedor</h1>
                <br/>
                <div style="text-align: center">
                    <img src="../resources/images/user.ico" style="height: 9em" />
                </div>
                <br/><br/>

                <!--Este panelGrid hace referencia al formulario para capturar información-->
                <p:panelGrid style="width: 100%" >
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Identificación*" />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.identificacion}"

                                         id="usuarioIdentificacion"
                                         required="true"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel for="usuarioPrimerNombre" value="Primer Nombre*"/>
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.primerNombre}"

                                         id="usuarioPrimerNombre"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Primer Apellido*"/>
                        </p:column>
                        <p:column>

                            <p:inputText value="#{usuarioVmb.personaComponente.primerApellido}" 

                                         id="usuarioPrimerApellido"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Segundo Apellido" />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.segundoApellido}" 

                                         id="usuarioSegundoApellido"/>
                        </p:column>
                    </p:row>
                    <p:row >
                        <p:column>
                            <p:outputLabel value="Fecha de Nacimiento*" for="usuarioFechaNacimiento"/>
                        </p:column>
                        <p:column>
                            <p:calendar value="#{usuarioVmb.personaComponente.fechaNacimiento}" 

                                        id="usuarioFechaNacimiento"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Roles del Sistema*"/>
                        </p:column>
                        <p:column >
                            <p:selectOneMenu  value="#{usuarioVmb.rolComponente.rolNombre}" style="width: 60%" required="true" rendered="#{userSmb.usuarioSession.rol.nombre == 'Administrador'}">
                                <f:selectItem itemLabel="Seleccione Uno" itemValue="" noSelectionOption="true"/>
                                <f:selectItem itemLabel="Administrador" itemValue="Administrador" />
                                <f:selectItem itemLabel="Supervisor" itemValue="Supervisor" /> 
                                <f:selectItem itemLabel="Vendedor" itemValue="Vendedor"/> 
                            </p:selectOneMenu>
                            <p:selectOneMenu  value="#{usuarioVmb.rolComponente.rolNombre}" style="width: 60%" required="true" rendered="#{userSmb.usuarioSession.rol.nombre == 'Supervisor'}">
                                <f:selectItem itemLabel="Seleccione Uno" itemValue="" noSelectionOption="true"/>
                                <f:selectItem itemLabel="Vendedor" itemValue="Vendedor"/> 
                            </p:selectOneMenu>
                        </p:column> 


                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Direccion"/>
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.direccion}"

                                         id="usuarioDireccion"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Teléfono Móvil*"
                                           />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.telefonoMovil}" 
                                         required="true"
                                         id="usuarioTelefonoMovil"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Teléfono Fijo" />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.telefonoFijo}" 

                                         id="usuarioTelefonoFijo"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Email*"/>
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.personaComponente.email}"
                                         required="true"
                                         id="usuarioEmail"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Nombre Usuario*"
                                           />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{usuarioVmb.usuarioNombre}"
                                         required="true"
                                         id="usuarioNombreUsuario"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Contraseña*"/>
                        </p:column>
                        <p:column>
                            <p:password value="#{usuarioVmb.usuarioPassword}" 
                                        required="true"
                                        id="usuarioContrasena"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>

                <!-- Mensajes de notificacion para cada uno de los campos de texto-->

                <br></br>


                <div align="center">
                    <p:commandButton class="btn btn-success" value="Guardar Usuario" id="saveButtomId"
                                     actionListener="#{usuarioVmb.persistirUsuario()}" update="formAgregarUsuarioId"/>
                </div>
            </h:form>
        </div>
    </ui:define>
</ui:composition>